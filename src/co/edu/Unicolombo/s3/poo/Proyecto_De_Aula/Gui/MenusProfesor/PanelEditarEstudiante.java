/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package co.edu.Unicolombo.s3.poo.Proyecto_De_Aula.Gui.MenusProfesor;

import com.toedter.calendar.JDateChooser;
import com.toedter.calendar.JTextFieldDateEditor;
import java.awt.Color;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import javax.swing.ButtonGroup;
import javax.swing.JOptionPane;

/**
 *
 * @author ASUS
 */
public class PanelEditarEstudiante extends javax.swing.JPanel {

    /**
     * Creates new form VendedorEditarcliente
     */
    public PanelEditarEstudiante() {
        initComponents();
        configurarCamposTexto();
        grupoGenero();
        configurarDateChooser();

        CodigoEstTxt.setEnabled(false);
        
        
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        botonesGenero = new javax.swing.ButtonGroup();
        jPanel1 = new javax.swing.JPanel();
        jLabelNombre = new javax.swing.JLabel();
        nombreEstTxt = new javax.swing.JTextField();
        jSeparator1 = new javax.swing.JSeparator();
        correoEstTxt = new javax.swing.JTextField();
        jSeparator2 = new javax.swing.JSeparator();
        jLabelCorrreo = new javax.swing.JLabel();
        jSeparator3 = new javax.swing.JSeparator();
        jLabelContraseña = new javax.swing.JLabel();
        nuevaContraseñaEstTxt = new javax.swing.JPasswordField();
        ModificarBoton = new javax.swing.JPanel();
        ModificarTxt = new javax.swing.JLabel();
        jLabelApellido = new javax.swing.JLabel();
        apellidoEstTxt = new javax.swing.JTextField();
        jLabelGenero = new javax.swing.JLabel();
        jSeparator5 = new javax.swing.JSeparator();
        jSeparator6 = new javax.swing.JSeparator();
        jLabelConfirmarContraseña = new javax.swing.JLabel();
        confirmarContraseñaEstTxt = new javax.swing.JPasswordField();
        jLabelID = new javax.swing.JLabel();
        IDEstTxt = new javax.swing.JTextField();
        jSeparator7 = new javax.swing.JSeparator();
        gMujer = new javax.swing.JRadioButton();
        gHombre = new javax.swing.JRadioButton();
        jLabelFechaNacimiento = new javax.swing.JLabel();
        jSeparator8 = new javax.swing.JSeparator();
        jSeparator9 = new javax.swing.JSeparator();
        jDateChooserEst = new com.toedter.calendar.JDateChooser();
        jLabelTelefono = new javax.swing.JLabel();
        TelefonoEstTxt = new javax.swing.JTextField();
        jSeparator10 = new javax.swing.JSeparator();
        jLabelCodigoEstudiante = new javax.swing.JLabel();
        CodigoEstTxt = new javax.swing.JTextField();
        jSeparator11 = new javax.swing.JSeparator();
        jLabelGrupo = new javax.swing.JLabel();
        jSeparator12 = new javax.swing.JSeparator();
        jLabelSemestre = new javax.swing.JLabel();
        jSeparator13 = new javax.swing.JSeparator();
        jComboBoxCarrera = new javax.swing.JComboBox<>();
        jComboBoxSemestre = new javax.swing.JComboBox<>();
        buscar = new javax.swing.JLabel();
        text_buscar = new javax.swing.JTextField();
        button_buscar = new javax.swing.JButton();
        jSeparator14 = new javax.swing.JSeparator();
        botonNuevo = new javax.swing.JPanel();
        botonNuevoTxt = new javax.swing.JLabel();

        setOpaque(false);
        setPreferredSize(new java.awt.Dimension(660, 420));
        setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jPanel1.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jLabelNombre.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N
        jLabelNombre.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        jLabelNombre.setText("Nombre(s)");
        jPanel1.add(jLabelNombre, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 10, 130, 30));

        nombreEstTxt.setForeground(new java.awt.Color(204, 204, 204));
        nombreEstTxt.setText("Ingrese su(s) Nombre(s)");
        nombreEstTxt.setBorder(null);
        nombreEstTxt.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                nombreEstTxtMousePressed(evt);
            }
        });
        nombreEstTxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                nombreEstTxtActionPerformed(evt);
            }
        });
        jPanel1.add(nombreEstTxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 40, 170, 30));

        jSeparator1.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.add(jSeparator1, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 80, 170, -1));

        correoEstTxt.setForeground(new java.awt.Color(204, 204, 204));
        correoEstTxt.setText("Ingrese su correo");
        correoEstTxt.setBorder(null);
        correoEstTxt.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                correoEstTxtMousePressed(evt);
            }
        });
        correoEstTxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                correoEstTxtActionPerformed(evt);
            }
        });
        jPanel1.add(correoEstTxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 120, 160, 30));

        jSeparator2.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.add(jSeparator2, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 160, 160, -1));

        jLabelCorrreo.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N
        jLabelCorrreo.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        jLabelCorrreo.setText("Correo");
        jPanel1.add(jLabelCorrreo, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 80, 100, 30));

        jSeparator3.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.add(jSeparator3, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 250, 160, -1));

        jLabelContraseña.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N
        jLabelContraseña.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        jLabelContraseña.setText("Nueva Contraseña");
        jPanel1.add(jLabelContraseña, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 170, 100, 30));

        nuevaContraseñaEstTxt.setForeground(new java.awt.Color(204, 204, 204));
        nuevaContraseñaEstTxt.setText("jPasswordField1");
        nuevaContraseñaEstTxt.setBorder(null);
        nuevaContraseñaEstTxt.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                nuevaContraseñaEstTxtMousePressed(evt);
            }
        });
        nuevaContraseñaEstTxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                nuevaContraseñaEstTxtActionPerformed(evt);
            }
        });
        jPanel1.add(nuevaContraseñaEstTxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 210, 160, 30));

        ModificarBoton.setBackground(new java.awt.Color(1, 174, 250));

        ModificarTxt.setFont(new java.awt.Font("Eras Bold ITC", 0, 14)); // NOI18N
        ModificarTxt.setForeground(new java.awt.Color(255, 255, 255));
        ModificarTxt.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        ModificarTxt.setText("Modificar");
        ModificarTxt.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(153, 153, 153)));
        ModificarTxt.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        ModificarTxt.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                ModificarTxtMouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                ModificarTxtMouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                ModificarTxtMouseExited(evt);
            }
        });

        javax.swing.GroupLayout ModificarBotonLayout = new javax.swing.GroupLayout(ModificarBoton);
        ModificarBoton.setLayout(ModificarBotonLayout);
        ModificarBotonLayout.setHorizontalGroup(
            ModificarBotonLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, ModificarBotonLayout.createSequentialGroup()
                .addGap(0, 0, Short.MAX_VALUE)
                .addComponent(ModificarTxt, javax.swing.GroupLayout.PREFERRED_SIZE, 99, javax.swing.GroupLayout.PREFERRED_SIZE))
        );
        ModificarBotonLayout.setVerticalGroup(
            ModificarBotonLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, ModificarBotonLayout.createSequentialGroup()
                .addGap(0, 0, Short.MAX_VALUE)
                .addComponent(ModificarTxt, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
        );

        jPanel1.add(ModificarBoton, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 370, -1, 30));

        jLabelApellido.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N
        jLabelApellido.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        jLabelApellido.setText("Apellido(s)");
        jPanel1.add(jLabelApellido, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 10, 130, 30));

        apellidoEstTxt.setForeground(new java.awt.Color(204, 204, 204));
        apellidoEstTxt.setText("Ingrese su(s) Apellido(s)");
        apellidoEstTxt.setBorder(null);
        apellidoEstTxt.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                apellidoEstTxtMousePressed(evt);
            }
        });
        apellidoEstTxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                apellidoEstTxtActionPerformed(evt);
            }
        });
        jPanel1.add(apellidoEstTxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 40, 170, 30));

        jLabelGenero.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N
        jLabelGenero.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        jLabelGenero.setText("Genero");
        jPanel1.add(jLabelGenero, new org.netbeans.lib.awtextra.AbsoluteConstraints(460, 170, 130, 30));

        jSeparator5.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.add(jSeparator5, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 340, 170, 10));

        jSeparator6.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.add(jSeparator6, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 340, 170, -1));

        jLabelConfirmarContraseña.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N
        jLabelConfirmarContraseña.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        jLabelConfirmarContraseña.setText("Confirmar Contraseña");
        jPanel1.add(jLabelConfirmarContraseña, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 260, 120, 30));

        confirmarContraseñaEstTxt.setForeground(new java.awt.Color(204, 204, 204));
        confirmarContraseñaEstTxt.setText("jPasswordField1");
        confirmarContraseñaEstTxt.setBorder(null);
        confirmarContraseñaEstTxt.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                confirmarContraseñaEstTxtMousePressed(evt);
            }
        });
        confirmarContraseñaEstTxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                confirmarContraseñaEstTxtActionPerformed(evt);
            }
        });
        jPanel1.add(confirmarContraseñaEstTxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 300, 170, 30));

        jLabelID.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N
        jLabelID.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        jLabelID.setText("ID");
        jPanel1.add(jLabelID, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 80, 130, 30));

        IDEstTxt.setForeground(new java.awt.Color(204, 204, 204));
        IDEstTxt.setText("Numero de Identificacion");
        IDEstTxt.setBorder(null);
        IDEstTxt.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                IDEstTxtMousePressed(evt);
            }
        });
        IDEstTxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                IDEstTxtActionPerformed(evt);
            }
        });
        jPanel1.add(IDEstTxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 120, 170, 30));

        jSeparator7.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.add(jSeparator7, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 160, 170, -1));

        gMujer.setText("Mujer");
        gMujer.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                gMujerActionPerformed(evt);
            }
        });
        jPanel1.add(gMujer, new org.netbeans.lib.awtextra.AbsoluteConstraints(550, 210, 80, 30));

        gHombre.setText("Hombre");
        gHombre.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                gHombreActionPerformed(evt);
            }
        });
        jPanel1.add(gHombre, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 210, 80, 30));

        jLabelFechaNacimiento.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N
        jLabelFechaNacimiento.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        jLabelFechaNacimiento.setText("Fecha de nacimiento");
        jPanel1.add(jLabelFechaNacimiento, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 270, 130, 30));

        jSeparator8.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.add(jSeparator8, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 80, 170, -1));

        jSeparator9.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.add(jSeparator9, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 250, 170, 10));
        jPanel1.add(jDateChooserEst, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 300, 170, 30));

        jLabelTelefono.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N
        jLabelTelefono.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        jLabelTelefono.setText("Telefono");
        jPanel1.add(jLabelTelefono, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 170, 130, 30));

        TelefonoEstTxt.setForeground(new java.awt.Color(204, 204, 204));
        TelefonoEstTxt.setText("Ingrese se numero de Telefono");
        TelefonoEstTxt.setBorder(null);
        TelefonoEstTxt.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                TelefonoEstTxtMousePressed(evt);
            }
        });
        TelefonoEstTxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                TelefonoEstTxtActionPerformed(evt);
            }
        });
        jPanel1.add(TelefonoEstTxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 210, 170, 30));

        jSeparator10.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.add(jSeparator10, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 250, 170, -1));

        jLabelCodigoEstudiante.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N
        jLabelCodigoEstudiante.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        jLabelCodigoEstudiante.setText("Codigo Estudiante");
        jPanel1.add(jLabelCodigoEstudiante, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 270, 140, 30));

        CodigoEstTxt.setEditable(false);
        CodigoEstTxt.setForeground(new java.awt.Color(204, 204, 204));
        CodigoEstTxt.setBorder(null);
        CodigoEstTxt.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                CodigoEstTxtMousePressed(evt);
            }
        });
        CodigoEstTxt.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                CodigoEstTxtActionPerformed(evt);
            }
        });
        jPanel1.add(CodigoEstTxt, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 300, 180, 30));

        jSeparator11.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.add(jSeparator11, new org.netbeans.lib.awtextra.AbsoluteConstraints(420, 400, 180, 10));

        jLabelGrupo.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N
        jLabelGrupo.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        jLabelGrupo.setText("Carrera");
        jPanel1.add(jLabelGrupo, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 10, 130, 30));

        jSeparator12.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.add(jSeparator12, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 80, 170, 10));

        jLabelSemestre.setFont(new java.awt.Font("Segoe UI Semibold", 0, 12)); // NOI18N
        jLabelSemestre.setHorizontalAlignment(javax.swing.SwingConstants.LEFT);
        jLabelSemestre.setText("Semestre");
        jPanel1.add(jLabelSemestre, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 90, 130, 30));

        jSeparator13.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.add(jSeparator13, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 160, 170, -1));

        jComboBoxCarrera.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Ingeniería Industrial", "Ingeniería Mecánica", "Ingeniería Robótica y Mecatrónica", "Ingeniería de Sistemas", "Ingeniería Civil", "Ingeniería Informática", "Ingeniería Electrónica", "Ingeniería Ambiental o Medio Ambiental", "Ingeniería en Telecomunicaciones", "Ingeniería Agropecuaria", "Ingeniería de Minas", "Ingeniería de Software", "Ingeniería Química", "Ingeniería Geomática", "Ingeniería en Sonido", "Ingeniería Hidráulica", "Ingeniería Metalúrgica", "Ingeniería Física", "Ingeniería Zootecnista", "Ingeniería Naval", "Ingeniería Biomédica", "Ingeniería Forestal", "Ingeniería Petrolera", "Ingeniería de Producción por Ciclos Propedéuticos", "Ingeniería Agroforestal", "Ingeniería de Producción", "Ingeniería Eléctrica ", "Ingeniería Electromecánica", "Ingeniería de Materiales ", "Ingeniería en Ecología", "Ingeniería Aeronáutica", "Ingeniería de Fabricación ", "Bioingeniería ", "Ingeniería Pesquera ", "Ingeniería de Agrimensura", "Medicina general", "Enfermería", "Biomedicina", "Odontología", "Oftalmología", "Farmacia", "Bacteriología y laboratorio clínico", "Optometría", "Psiquiatría", "Paramédico", "Nutrición y dietetica", "Fisioterapia o Terapia física", "Quiropráctica", "Genética", "Atención prehospitalaria", "Terapia respiratoria", "Salud ocupacional", "Arquitecto paisajista", "Planificador urbano", "Arquitectura", "Arquitecto de restauración", "Arquitecto de investigación", "Arquitecto de iluminación", "Arquitecto político", "Arquitecto extremo", "Diseño industrial", "Diseñador gráfico", "Diseñador de videojuegos", "Diseño textiles", "Diseño de muebles", "Diseño publicitario", "Arte contemporáneo", "Diseño naval", "Diseño de interiores", "Diseño de marcas", "Diseño y desarrollo web", "Diseño de moda", "Diseño y decoración", "Administración de Empresas", "Administración en Recursos Humanos.", "Administración y Finanzas", "Administración en Salud Ocupacional", "Administración Comercial y de Mercadeo", "Administración en Mercadeo", "Administración de Logística Internacionales", "Administración de Negocios", "Administración Financiera", "Negocios internacionales", "Sociología", "Comunicación Social y Periodismo", "Fianzas y contabilidad", "Finanzas y Comercio Internacional", "Relaciones Económicas Internacionales", "Derecho", "Economía", "Contaduría pública", "Estadistica" }));
        jComboBoxCarrera.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jComboBoxCarreraActionPerformed(evt);
            }
        });
        jPanel1.add(jComboBoxCarrera, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 40, 170, 30));

        jComboBoxSemestre.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15" }));
        jPanel1.add(jComboBoxSemestre, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 120, 170, 30));

        buscar.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        buscar.setForeground(new java.awt.Color(59, 75, 82));
        buscar.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        buscar.setText("Buscar:");
        jPanel1.add(buscar, new org.netbeans.lib.awtextra.AbsoluteConstraints(360, 370, 60, 30));

        text_buscar.setBorder(null);
        text_buscar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                text_buscarActionPerformed(evt);
            }
        });
        jPanel1.add(text_buscar, new org.netbeans.lib.awtextra.AbsoluteConstraints(420, 370, 180, 30));

        button_buscar.setIcon(new javax.swing.ImageIcon(getClass().getResource("/co/edu/Unicolombo/s3/poo/Proyecto_De_Aula/vistas/iconos/vaso (2).png"))); // NOI18N
        button_buscar.setBorder(null);
        button_buscar.setBorderPainted(false);
        button_buscar.setContentAreaFilled(false);
        button_buscar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        button_buscar.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                button_buscarMouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                button_buscarMouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                button_buscarMouseExited(evt);
            }
        });
        button_buscar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                button_buscarActionPerformed(evt);
            }
        });
        jPanel1.add(button_buscar, new org.netbeans.lib.awtextra.AbsoluteConstraints(600, 360, 40, 50));

        jSeparator14.setBackground(new java.awt.Color(255, 255, 255));
        jPanel1.add(jSeparator14, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 340, 180, 10));

        botonNuevo.setBackground(new java.awt.Color(1, 174, 250));

        botonNuevoTxt.setFont(new java.awt.Font("Eras Bold ITC", 0, 14)); // NOI18N
        botonNuevoTxt.setForeground(new java.awt.Color(255, 255, 255));
        botonNuevoTxt.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        botonNuevoTxt.setIcon(new javax.swing.ImageIcon(getClass().getResource("/co/edu/Unicolombo/s3/poo/Proyecto_De_Aula/vistas/iconos/boton-agregar.png"))); // NOI18N
        botonNuevoTxt.setText("Nuevo");
        botonNuevoTxt.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(153, 153, 153)));
        botonNuevoTxt.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        botonNuevoTxt.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                botonNuevoTxtMouseClicked(evt);
            }
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                botonNuevoTxtMouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                botonNuevoTxtMouseExited(evt);
            }
        });

        javax.swing.GroupLayout botonNuevoLayout = new javax.swing.GroupLayout(botonNuevo);
        botonNuevo.setLayout(botonNuevoLayout);
        botonNuevoLayout.setHorizontalGroup(
            botonNuevoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, botonNuevoLayout.createSequentialGroup()
                .addGap(0, 0, Short.MAX_VALUE)
                .addComponent(botonNuevoTxt, javax.swing.GroupLayout.PREFERRED_SIZE, 99, javax.swing.GroupLayout.PREFERRED_SIZE))
        );
        botonNuevoLayout.setVerticalGroup(
            botonNuevoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, botonNuevoLayout.createSequentialGroup()
                .addGap(0, 0, Short.MAX_VALUE)
                .addComponent(botonNuevoTxt, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
        );

        jPanel1.add(botonNuevo, new org.netbeans.lib.awtextra.AbsoluteConstraints(180, 370, -1, 30));

        add(jPanel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 660, 420));
    }// </editor-fold>//GEN-END:initComponents

    private void nombreEstTxtMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_nombreEstTxtMousePressed
        if (nombreEstTxt.getText().equals("Ingrese su(s) Nombre(s)")) {
            nombreEstTxt.setText("");
            nombreEstTxt.setForeground(Color.black);
        }

        restaurarTextoPredeterminado();
    }//GEN-LAST:event_nombreEstTxtMousePressed

    private void nombreEstTxtActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_nombreEstTxtActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_nombreEstTxtActionPerformed

    private void correoEstTxtMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_correoEstTxtMousePressed
        if (correoEstTxt.getText().equals("Ingrese su correo")) {
            correoEstTxt.setText("");
            correoEstTxt.setForeground(Color.black);
        }

        restaurarTextoPredeterminado();
    }//GEN-LAST:event_correoEstTxtMousePressed

    private void correoEstTxtActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_correoEstTxtActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_correoEstTxtActionPerformed

    private void nuevaContraseñaEstTxtMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_nuevaContraseñaEstTxtMousePressed
        if (String.valueOf(nuevaContraseñaEstTxt.getPassword()).equals("•••••••••••••••")) {
            nuevaContraseñaEstTxt.setText("");
            nuevaContraseñaEstTxt.setForeground(Color.black);
        }

        restaurarTextoPredeterminado();
    }//GEN-LAST:event_nuevaContraseñaEstTxtMousePressed

    private void nuevaContraseñaEstTxtActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_nuevaContraseñaEstTxtActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_nuevaContraseñaEstTxtActionPerformed

    private void ModificarTxtMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_ModificarTxtMouseClicked
        if (validarEntrada()) {
            actualizarInformacionEstudiante();  // Método para actualizar datos del estudiante
            if (listener != null) {
                listener.onEstudianteModificado("- Se ha modificado un estudiante" + "\n");  // Llamada al listener
            }
        } else {
            JOptionPane.showMessageDialog(this, "Debe llenar todos los campos de información correctamente", "Error", JOptionPane.ERROR_MESSAGE);
        }

    }//GEN-LAST:event_ModificarTxtMouseClicked

    private void ModificarTxtMouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_ModificarTxtMouseEntered
        ModificarBoton.setBackground(new Color(1, 105, 150));
    }//GEN-LAST:event_ModificarTxtMouseEntered

    private void ModificarTxtMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_ModificarTxtMouseExited
        ModificarBoton.setBackground(new Color(1, 174, 250));
    }//GEN-LAST:event_ModificarTxtMouseExited

    private void apellidoEstTxtMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_apellidoEstTxtMousePressed
        if (apellidoEstTxt.getText().equals("Ingrese su(s) Apellido(s)")) {
            apellidoEstTxt.setText("");
            apellidoEstTxt.setForeground(Color.black);
        }

        restaurarTextoPredeterminado();
    }//GEN-LAST:event_apellidoEstTxtMousePressed

    private void apellidoEstTxtActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_apellidoEstTxtActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_apellidoEstTxtActionPerformed

    private void confirmarContraseñaEstTxtMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_confirmarContraseñaEstTxtMousePressed
        if (String.valueOf(confirmarContraseñaEstTxt.getPassword()).equals("•••••••••••••••")) {
            confirmarContraseñaEstTxt.setText("");
            confirmarContraseñaEstTxt.setForeground(Color.black);
        }

        restaurarTextoPredeterminado();
    }//GEN-LAST:event_confirmarContraseñaEstTxtMousePressed

    private void confirmarContraseñaEstTxtActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_confirmarContraseñaEstTxtActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_confirmarContraseñaEstTxtActionPerformed

    private void IDEstTxtMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_IDEstTxtMousePressed
        if (IDEstTxt.getText().equals("Numero de Identificacion")) {
            IDEstTxt.setText("");
            IDEstTxt.setForeground(Color.black);
        }

        restaurarTextoPredeterminado();
    }//GEN-LAST:event_IDEstTxtMousePressed

    private void IDEstTxtActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_IDEstTxtActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_IDEstTxtActionPerformed

    private void gMujerActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_gMujerActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_gMujerActionPerformed

    private void gHombreActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_gHombreActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_gHombreActionPerformed

    private void TelefonoEstTxtMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_TelefonoEstTxtMousePressed
        if (TelefonoEstTxt.getText().equals("Ingrese Numero de Telefono")) {
            TelefonoEstTxt.setText("");
            TelefonoEstTxt.setForeground(Color.black);
        }

        restaurarTextoPredeterminado();
    }//GEN-LAST:event_TelefonoEstTxtMousePressed

    private void TelefonoEstTxtActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_TelefonoEstTxtActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_TelefonoEstTxtActionPerformed

    private void CodigoEstTxtMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_CodigoEstTxtMousePressed
        if (CodigoEstTxt.getText().equals("")) {
            CodigoEstTxt.setText("");
            CodigoEstTxt.setForeground(Color.black);
        }

        restaurarTextoPredeterminado();
    }//GEN-LAST:event_CodigoEstTxtMousePressed

    private void CodigoEstTxtActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_CodigoEstTxtActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_CodigoEstTxtActionPerformed

    private void jComboBoxCarreraActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jComboBoxCarreraActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jComboBoxCarreraActionPerformed

    private void text_buscarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_text_buscarActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_text_buscarActionPerformed

    private void button_buscarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_button_buscarActionPerformed
    }//GEN-LAST:event_button_buscarActionPerformed

    private void button_buscarMouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_button_buscarMouseEntered
        // TODO add your handling code here:
    }//GEN-LAST:event_button_buscarMouseEntered

    private void button_buscarMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_button_buscarMouseExited
        // TODO add your handling code here:
    }//GEN-LAST:event_button_buscarMouseExited

    private void button_buscarMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_button_buscarMouseClicked
        botonBuscar();
    }//GEN-LAST:event_button_buscarMouseClicked

    private void botonNuevoTxtMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_botonNuevoTxtMouseClicked
        if (!validarEntrada()) {
            return;
        }

        if (!insertarEstudianteEnBD()) {
            JOptionPane.showMessageDialog(jPanel1, "No se pudo registrar el estudiante en la base de datos", "Error", JOptionPane.ERROR_MESSAGE);
        } else {
            JOptionPane.showMessageDialog(jPanel1, "- Se ha agregado un estudiante" + "\n");
            if (listener != null) {
                listener.onEstudianteModificado("¡Estudiante agregado correctamente!");  // Llamada al listener
            }
        }
    }//GEN-LAST:event_botonNuevoTxtMouseClicked

    private void botonNuevoTxtMouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_botonNuevoTxtMouseEntered
        botonNuevo.setBackground(new Color(1, 105, 150));
    }//GEN-LAST:event_botonNuevoTxtMouseEntered

    private void botonNuevoTxtMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_botonNuevoTxtMouseExited
        botonNuevo.setBackground(new Color(1, 174, 250));
    }//GEN-LAST:event_botonNuevoTxtMouseExited

    private EstudianteModificadoListener listener;

    public interface EstudianteModificadoListener {
        void onEstudianteModificado(String mensaje);
    }

    public void setEstudianteModificadoListener(EstudianteModificadoListener listener) {
        this.listener = listener;
    }
    

    private void configurarDateChooser() {
        jDateChooserEst.setDateFormatString("d/MM/yyyy");
        jDateChooserEst.getDateEditor().setEnabled(false);
        jDateChooserEst.setSelectableDateRange(new java.util.Date(0), new java.util.Date()); // permite seleccionar fechas hasta la fecha actual
    }

    private void grupoGenero() {
        botonesGenero = new ButtonGroup();
        botonesGenero.add(gHombre);
        botonesGenero.add(gMujer);
    }

    private void configurarCamposTexto() {
        IDEstTxt.addKeyListener(new KeyAdapter() {
            @Override
            public void keyTyped(KeyEvent e) {
                char caracter = e.getKeyChar();
                if (!Character.isDigit(caracter)) {
                    e.consume();
                }
            }
        });

        nombreEstTxt.addKeyListener(new KeyAdapter() {
            @Override
            public void keyTyped(KeyEvent e) {
                char caracter = e.getKeyChar();
                if (!Character.isLetter(caracter) && !Character.isWhitespace(caracter)) {
                    e.consume();
                }
            }
        });

        apellidoEstTxt.addKeyListener(new KeyAdapter() {
            @Override
            public void keyTyped(KeyEvent e) {
                char caracter = e.getKeyChar();
                if (!Character.isLetter(caracter) && !Character.isWhitespace(caracter)) {
                    e.consume();
                }
            }
        });

        TelefonoEstTxt.addKeyListener(new KeyAdapter() {
            @Override
            public void keyTyped(KeyEvent e) {
                char caracter = e.getKeyChar();
                if (!Character.isDigit(caracter)) {
                    e.consume();
                }
            }
        });

        TextosPredeterminado(nombreEstTxt, "Ingrese su(s) Nombre(s)");
        TextosPredeterminado(apellidoEstTxt, "Ingrese su(s) Apellido(s)");
        TextosPredeterminado(correoEstTxt, "Ingrese su correo");
        TextosPredeterminado(nuevaContraseñaEstTxt, "•••••••••••••••");
        TextosPredeterminado(confirmarContraseñaEstTxt, "•••••••••••••••");
        TextosPredeterminado(IDEstTxt, "Numero de Identificacion");
        TextosPredeterminado(TelefonoEstTxt, "Ingrese Numero de Telefono");

        agregarFocusListener(nombreEstTxt, "Ingrese su(s) Nombre(s)");
        agregarFocusListener(apellidoEstTxt, "Ingrese su(s) Apellido(s)");
        agregarFocusListener(correoEstTxt, "Ingrese su correo");
        agregarFocusListener(nuevaContraseñaEstTxt, "•••••••••••••••");
        agregarFocusListener(confirmarContraseñaEstTxt, "•••••••••••••••");
        agregarFocusListener(IDEstTxt, "Numero de Identificacion");
        agregarFocusListener(TelefonoEstTxt, "Ingrese Numero de Telefono");
    }

    private void TextosPredeterminado(javax.swing.JTextField campo, String texto) {
        campo.setForeground(Color.gray);
        campo.setText(texto);
    }

    private void agregarFocusListener(javax.swing.JTextField campo, String texto) {
        campo.addFocusListener(new FocusListener() {
            @Override
            public void focusGained(FocusEvent e) {
                if (campo.getText().equals(texto)) {
                    campo.setText("");
                    campo.setForeground(Color.black);
                }
            }

            @Override
            public void focusLost(FocusEvent e) {
                if (campo.getText().isEmpty()) {
                    campo.setText(texto);
                    campo.setForeground(Color.gray);
                }
            }
        });
    }

    private void limpiarCampos() {
        TextosPredeterminado(nombreEstTxt, "Ingrese su(s) Nombre(s)");
        TextosPredeterminado(apellidoEstTxt, "Ingrese su(s) Apellido(s)");
        TextosPredeterminado(correoEstTxt, "Ingrese su correo");
        TextosPredeterminado(nuevaContraseñaEstTxt, "•••••••••••••••");
        TextosPredeterminado(confirmarContraseñaEstTxt, "•••••••••••••••");
        TextosPredeterminado(IDEstTxt, "Numero de Identificacion");
        TextosPredeterminado(TelefonoEstTxt, "Ingrese Numero de Telefono");
        botonesGenero.clearSelection();

        if (jDateChooserEst != null) {
            JTextFieldDateEditor editor = (JTextFieldDateEditor) jDateChooserEst.getDateEditor();
            editor.setText("dd/mm/yyyy");
            editor.setForeground(Color.gray);
            jDateChooserEst.setDate(null);
        }
    }

    private void restaurarTextoPredeterminado() {
        if (nombreEstTxt.getText().isEmpty()) {
            TextosPredeterminado(nombreEstTxt, "Ingrese su(s) Nombre(s)");
        }
        if (apellidoEstTxt.getText().isEmpty()) {
            TextosPredeterminado(apellidoEstTxt, "Ingrese su(s) Apellido(s)");
        }
        if (correoEstTxt.getText().isEmpty()) {
            TextosPredeterminado(correoEstTxt, "Ingrese su correo");
        }
        if (String.valueOf(nuevaContraseñaEstTxt.getPassword()).isEmpty()) {
            TextosPredeterminado(nuevaContraseñaEstTxt, "•••••••••••••••");
        }
        if (String.valueOf(confirmarContraseñaEstTxt.getPassword()).isEmpty()) {
            TextosPredeterminado(confirmarContraseñaEstTxt, "•••••••••••••••");
        }
        if (IDEstTxt.getText().isEmpty()) {
            TextosPredeterminado(IDEstTxt, "Numero de Identificacion");
        }
        if (TelefonoEstTxt.getText().isEmpty()) {
            TextosPredeterminado(TelefonoEstTxt, "Ingrese Numero de Telefono");
        }

        if (jDateChooserEst.getDate() == null) {
            JTextFieldDateEditor editor = (JTextFieldDateEditor) jDateChooserEst.getDateEditor();
            editor.setText("dd/mm/yyyy");
            editor.setForeground(Color.gray);
        }
    }

    // Fin de metodos visuales
    private class ValidacionContrseña {

        public static boolean contraseñasCoinciden(String contraseña, String confirmarContraseña) {
            return contraseña.equals(confirmarContraseña);
        }
    }

    private class ValidadorJDateChooser {

        public static boolean esFechaValida(JDateChooser jDateChooser) {
            if (jDateChooser.getDate() == null) {
                return false;
            }

            java.util.Date fechaNacimiento = jDateChooser.getDate();
            java.util.Calendar calNacimiento = java.util.Calendar.getInstance();
            calNacimiento.setTime(fechaNacimiento);

            java.util.Calendar calActual = java.util.Calendar.getInstance();

            int edad = calActual.get(java.util.Calendar.YEAR) - calNacimiento.get(java.util.Calendar.YEAR);
            int mesActual = calActual.get(java.util.Calendar.MONTH);
            int mesNacimiento = calNacimiento.get(java.util.Calendar.MONTH);
            int diaActual = calActual.get(java.util.Calendar.DAY_OF_MONTH);
            int diaNacimiento = calNacimiento.get(java.util.Calendar.DAY_OF_MONTH);

            if (mesNacimiento > mesActual || (mesNacimiento == mesActual && diaNacimiento > diaActual)) {
                edad--;
            }

            int edadMinima = 14;
            int edadMaxima = 100;

            return (edad >= edadMinima && edad <= edadMaxima);
        }
    }

    private static boolean esCorreoValido(String correoElectronico) {
        String patron = "^[a-zA-Z0-9_+&*-]+(?:\\.[a-zA-Z0-9_+&*-]+)*@(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,7}$";
        Pattern pattern = Pattern.compile(patron);
        Matcher matcher = pattern.matcher(correoElectronico);
        return matcher.matches();
    }

    private boolean validarGenero() {
        return gHombre.isSelected() || gMujer.isSelected();
    }

    private boolean validarEntrada() {
        if (!ValidadorJDateChooser.esFechaValida(jDateChooserEst)) {
            javax.swing.JOptionPane.showMessageDialog(jPanel1, "Debe seleccionar una fecha valida", "Error", javax.swing.JOptionPane.ERROR_MESSAGE);
            return false;
        }

        if (!validarGenero()) {
            javax.swing.JOptionPane.showMessageDialog(jPanel1, "Debe seleccionar su genero", "Error", javax.swing.JOptionPane.ERROR_MESSAGE);
            return false;
        }

        // Validar que el ID sea de 10 dígitos
        if (IDEstTxt.getText().trim().length() != 8 && IDEstTxt.getText().trim().length() != 10 && IDEstTxt.getText().trim().length() != 11) {
            javax.swing.JOptionPane.showMessageDialog(jPanel1, "Debe ingresar un numero de Identificacion valido", "Error", javax.swing.JOptionPane.ERROR_MESSAGE);
            return false;
        }

        // Validar que la contraseña tenga al menos 6 caracteres
        if (String.valueOf(nuevaContraseñaEstTxt.getPassword()).trim().length() < 6) {
            javax.swing.JOptionPane.showMessageDialog(jPanel1, "Debe ingresar una contraseña más larga (al menos 6 caracteres)", "Error", javax.swing.JOptionPane.ERROR_MESSAGE);
            return false;
        }

        if (!esCorreoValido(correoEstTxt.getText())) {
            javax.swing.JOptionPane.showMessageDialog(jPanel1, "Debe Ingresar un correo electrónico válido.", "Error", javax.swing.JOptionPane.ERROR_MESSAGE);
            return false;
        }

        String contraseña = String.valueOf(nuevaContraseñaEstTxt.getPassword());
        String confirmarContraseña = String.valueOf(confirmarContraseñaEstTxt.getPassword());

        if (!ValidacionContrseña.contraseñasCoinciden(contraseña, confirmarContraseña)) {
            javax.swing.JOptionPane.showMessageDialog(jPanel1, "Las contraseñas no coinciden", "Error", javax.swing.JOptionPane.ERROR_MESSAGE);
            return false;
        }

        if (nombreEstTxt.getText().equals("Ingrese su(s) Nombre(s)")
                || apellidoEstTxt.getText().equals("Ingrese su(s) Apellido(s)")
                || correoEstTxt.getText().equals("Ingrese su correo")
                || String.valueOf(nuevaContraseñaEstTxt.getPassword()).equals("•••••••••••••••")
                || String.valueOf(confirmarContraseñaEstTxt.getPassword()).equals("•••••••••••••••")
                || IDEstTxt.getText().equals("Numero de Identificacion")
                || TelefonoEstTxt.getText().equals("Ingrese Numero de Telefono")) {

            javax.swing.JOptionPane.showMessageDialog(jPanel1, "Debe llenar todos los campos de informacion", "Error", javax.swing.JOptionPane.ERROR_MESSAGE);

            return false;
        }

        if (!ValidacionContrseña.contraseñasCoinciden(contraseña, confirmarContraseña)) {
            javax.swing.JOptionPane.showMessageDialog(jPanel1, "Las contraseñas no coinciden");
            return false;
        }

        return true;
    }

    private boolean botonBuscar() {

        try {
            Connection connection = DriverManager.getConnection("jdbc:mysql://localhost/plataforma", "root", "");
            PreparedStatement pst = connection.prepareStatement("SELECT * FROM estudiantes WHERE Codigo_Estudiante=?");
            pst.setString(1, text_buscar.getText().trim());

            ResultSet rs = pst.executeQuery();
            if (rs.next()) {
                nombreEstTxt.setText(rs.getString("Nombre"));
                apellidoEstTxt.setText(rs.getString("Apellidos"));
                jDateChooserEst.setDate(rs.getDate("Nacimiento"));
                correoEstTxt.setText(rs.getString("Email"));
                if ("Hombre".equals(rs.getString("Genero"))) {
                    gHombre.setSelected(true);
                } else if ("Mujer".equals(rs.getString("Genero"))) {
                    gMujer.setSelected(true);
                }
                IDEstTxt.setText(rs.getString("Identificacion"));
                TelefonoEstTxt.setText(rs.getString("Telefono"));
                jComboBoxSemestre.setSelectedItem(rs.getString("Semestre"));
                jComboBoxCarrera.setSelectedItem(rs.getString("Grupo"));

                // El código del estudiante no debe ser editable
                CodigoEstTxt.setText(rs.getString("Codigo_Estudiante"));
                CodigoEstTxt.setEditable(false);

            } else {
                javax.swing.JOptionPane.showMessageDialog(jPanel1, "Estudiante no registrado", "Error", javax.swing.JOptionPane.ERROR_MESSAGE);

            }

        } catch (Exception e) {

        }
        return false;
    }

    private void actualizarInformacionEstudiante() {
        try {
            Connection cn = DriverManager.getConnection("jdbc:mysql://localhost/plataforma", "root", "");
            PreparedStatement pst = cn.prepareStatement(
                    "UPDATE estudiantes SET Nombre=?, Apellidos=?, Nacimiento=?, Email=?, Genero=?, Contraseña=?, Identificacion=?, Telefono=?, Semestre=?, Grupo=? WHERE Codigo_Estudiante=?"
            );

            pst.setString(1, nombreEstTxt.getText().trim());
            pst.setString(2, apellidoEstTxt.getText().trim());
            pst.setDate(3, new java.sql.Date(jDateChooserEst.getDate().getTime()));
            pst.setString(4, correoEstTxt.getText().trim());
            pst.setString(5, gHombre.isSelected() ? "Hombre" : "Mujer");
            pst.setString(6, String.valueOf(nuevaContraseñaEstTxt.getPassword()).trim());
            pst.setString(7, IDEstTxt.getText().trim());
            pst.setString(8, TelefonoEstTxt.getText().trim());

            pst.setString(9, jComboBoxSemestre.getSelectedItem().toString());
            Object selectedItem2 = jComboBoxSemestre.getSelectedItem();
            if (selectedItem2 != null) {
                pst.setString(9, selectedItem2.toString());
            } else {
                // Maneja el caso en el que el item seleccionado es null
            }

            pst.setString(10, jComboBoxCarrera.getSelectedItem().toString());
            Object selectedItem = jComboBoxCarrera.getSelectedItem();
            if (selectedItem != null) {
                pst.setString(10, selectedItem.toString());
            } else {
                // Maneja el caso en el que el item seleccionado es null
            }

            pst.setString(11, text_buscar.getText().trim());

            pst.executeUpdate();
            JOptionPane.showMessageDialog(this, "Información actualizada correctamente", "Éxito", JOptionPane.INFORMATION_MESSAGE);
        } catch (SQLException e) {
            e.printStackTrace();
            JOptionPane.showMessageDialog(this, "Error al actualizar la información", "Error", JOptionPane.ERROR_MESSAGE);
        }
    }

    //Metodo para agregar nuevo estudiante en bd
    private void mostrarCodigoEstudiante(ResultSet rs) throws SQLException {
        if (rs.next()) {
            int codigoEstudiante = rs.getInt(1);
            javax.swing.JOptionPane.showMessageDialog(jPanel1, "Su código de estudiante es: " + codigoEstudiante + ". \nADVERTENCIA: Guarde el código antes de presionar el botón 'OK'.", "Warning", javax.swing.JOptionPane.WARNING_MESSAGE);
        }
    }

    private boolean usuarioExisteBd(String cedula, String correo, String nombre, String apellidos) {
        Connection cn = null;
        PreparedStatement pst = null;
        ResultSet rs = null;

        try {
            // Establecer conexión con la base de datos
            cn = DriverManager.getConnection("jdbc:mysql://localhost/plataforma", "root", "");

            // Consultar si existe un usuario con la misma cédula, correo, nombre y apellidos
            String query = "SELECT * FROM estudiantes WHERE Identificacion = ? OR Email = ? OR (Nombre = ? AND Apellidos = ?)";
            pst = cn.prepareStatement(query);
            pst.setString(1, cedula);
            pst.setString(2, correo);
            pst.setString(3, nombre);
            pst.setString(4, apellidos);
            rs = pst.executeQuery();

            // Si hay resultados, significa que el usuario ya existe
            if (rs.next()) {
                return true;
            } else {
                return false;
            }
        } catch (SQLException e) {
            javax.swing.JOptionPane.showMessageDialog(jPanel1, "Error al verificar el usuario: " + e.getMessage());
            return true; // En caso de error, asumimos que el usuario existe para evitar problemas
        } finally {
            // Cerrar la conexión y liberar recursos
            try {
                if (rs != null) {
                    rs.close();
                }
                if (pst != null) {
                    pst.close();
                }
                if (cn != null) {
                    cn.close();
                }
            } catch (SQLException e) {
                javax.swing.JOptionPane.showMessageDialog(jPanel1, "Error al cerrar la conexión: " + e.getMessage());
            }
        }
    }

    private boolean insertarEstudianteEnBD() {
        // Valida si el usuario ya existe en la base de datos
        if (usuarioExisteBd(IDEstTxt.getText(), correoEstTxt.getText(), nombreEstTxt.getText(), apellidoEstTxt.getText())) {
            javax.swing.JOptionPane.showMessageDialog(jPanel1, "El usuario que intenta ingresar, ya existe", "Error", javax.swing.JOptionPane.ERROR_MESSAGE);
            return false; // No se agrega el usuario
        }

        Connection cn = null;
        PreparedStatement pst = null;

        try {
            cn = DriverManager.getConnection("jdbc:mysql://localhost/plataforma", "root", "");
            pst = cn.prepareStatement("INSERT INTO estudiantes (Nombre, Apellidos, Email, Contraseña, Identificacion, Nacimiento, Genero, Tipo_Usuario, Telefono, Semestre, Grupo) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)", PreparedStatement.RETURN_GENERATED_KEYS);

            pst.setString(1, nombreEstTxt.getText());
            pst.setString(2, apellidoEstTxt.getText());
            pst.setString(3, correoEstTxt.getText());
            pst.setString(4, new String(nuevaContraseñaEstTxt.getPassword()));

            pst.setString(5, IDEstTxt.getText());

            pst.setDate(6, new java.sql.Date(jDateChooserEst.getDate().getTime()));

            String genero = gHombre.isSelected() ? "Hombre" : "Mujer";
            pst.setString(7, genero);

            pst.setString(8, "Estudiante");

            pst.setString(9, TelefonoEstTxt.getText().trim());

            pst.setString(10, jComboBoxSemestre.getSelectedItem().toString());
            Object selectedItem2 = jComboBoxSemestre.getSelectedItem();
            if (selectedItem2 != null) {
                pst.setString(10, selectedItem2.toString());
            } else {
                //Caso en el que el item seleccionado es null
            }

            pst.setString(11, jComboBoxCarrera.getSelectedItem().toString());
            Object selectedItem = jComboBoxCarrera.getSelectedItem();
            if (selectedItem != null) {
                pst.setString(11, selectedItem.toString());
            } else {
                //Caso en el que el item seleccionado es null
            }

            pst.executeUpdate();

            // Obtener el código de estudiante
            ResultSet rs = pst.getGeneratedKeys();
            limpiarCampos();
            mostrarCodigoEstudiante(rs);

            return true; //Agregado exitoso
        } catch (SQLException e) {
            javax.swing.JOptionPane.showMessageDialog(jPanel1, "Error al registrar el estudiante: " + e.getMessage());
            return false; //Agregado fallido
        } finally {
            //Cerrar la conexion
        }
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JTextField CodigoEstTxt;
    private javax.swing.JTextField IDEstTxt;
    private javax.swing.JPanel ModificarBoton;
    private javax.swing.JLabel ModificarTxt;
    private javax.swing.JTextField TelefonoEstTxt;
    private javax.swing.JTextField apellidoEstTxt;
    private javax.swing.JPanel botonNuevo;
    private javax.swing.JLabel botonNuevoTxt;
    private javax.swing.ButtonGroup botonesGenero;
    private javax.swing.JLabel buscar;
    private javax.swing.JButton button_buscar;
    private javax.swing.JPasswordField confirmarContraseñaEstTxt;
    private javax.swing.JTextField correoEstTxt;
    private javax.swing.JRadioButton gHombre;
    private javax.swing.JRadioButton gMujer;
    private javax.swing.JComboBox<String> jComboBoxCarrera;
    private javax.swing.JComboBox<String> jComboBoxSemestre;
    private com.toedter.calendar.JDateChooser jDateChooserEst;
    private javax.swing.JLabel jLabelApellido;
    private javax.swing.JLabel jLabelCodigoEstudiante;
    private javax.swing.JLabel jLabelConfirmarContraseña;
    private javax.swing.JLabel jLabelContraseña;
    private javax.swing.JLabel jLabelCorrreo;
    private javax.swing.JLabel jLabelFechaNacimiento;
    private javax.swing.JLabel jLabelGenero;
    private javax.swing.JLabel jLabelGrupo;
    private javax.swing.JLabel jLabelID;
    private javax.swing.JLabel jLabelNombre;
    private javax.swing.JLabel jLabelSemestre;
    private javax.swing.JLabel jLabelTelefono;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JSeparator jSeparator10;
    private javax.swing.JSeparator jSeparator11;
    private javax.swing.JSeparator jSeparator12;
    private javax.swing.JSeparator jSeparator13;
    private javax.swing.JSeparator jSeparator14;
    private javax.swing.JSeparator jSeparator2;
    private javax.swing.JSeparator jSeparator3;
    private javax.swing.JSeparator jSeparator5;
    private javax.swing.JSeparator jSeparator6;
    private javax.swing.JSeparator jSeparator7;
    private javax.swing.JSeparator jSeparator8;
    private javax.swing.JSeparator jSeparator9;
    private javax.swing.JTextField nombreEstTxt;
    private javax.swing.JPasswordField nuevaContraseñaEstTxt;
    private javax.swing.JTextField text_buscar;
    // End of variables declaration//GEN-END:variables
}
